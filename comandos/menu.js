const fs = require('fs');

module.exports = {
    name: 'menu',
    description: 'MenÃº con diseÃ±o de lÃ­neas verticales idÃ©ntico a la imagen',
    run: async (sock, msg, body, args, isOwner) => {
        try {
            const from = msg.key.remoteJid;
            const thumbUrl = "https://i.postimg.cc/nLQ2RwPz/Screenshot-2025-12-30-14-40-31-396-com-miui-gallery-edit.jpg";

            // 1. Cargar base de datos
            let db = {};
            if (fs.existsSync('./usuarios.json')) {
                db = JSON.parse(fs.readFileSync('./usuarios.json'));
            }
            const userData = db[from];
            let nombreUser = isOwner ? "ğ‘±ğ’‰ğ’ğ’ ğŸ´â€â˜ ï¸" : (userData?.split('|')[0] || "ğ‘¨ğ’ˆğ’†ğ’ğ’•ğ’†");

            // 2. ConstrucciÃ³n del MenÃº (Estilo de la imagen)
            let textoMenu = `ğ‡ğ¨ğ¥ğš! ğ’ğ¨ğ² *ğ‘µğ’‚ğ’“ğ’–ğ’•ğ’ğ’ƒğ’ğ’•* ğŸ¥\n`;
            textoMenu += `_Â¡ğ‘©ğ’Šğ’†ğ’ğ’—ğ’†ğ’ğ’Šğ’…ğ’, ${nombreUser}!_ \n\n`;
            
            textoMenu += `â•­â”â”ã€” ğŸ“œ *ğ‘°ğ‘µğ‘­ğ‘¶ ğ‘ºğ‘°ğ‘ºğ‘»ğ‘¬ğ‘´ğ‘¨* ã€•â”â”ğŸ¥\n`;
            textoMenu += `â”ƒ âœ *ğ‘·ğ’‚ğ’Šğ’”:* ğ‘½ğ’†ğ’ğ’†ğ’›ğ’–ğ’†ğ’ğ’‚ ğŸ‡»ğŸ‡ª\n`;
            textoMenu += `â”ƒ âœ *ğ‘·ğ’“ğ’†ğ’‡ğ’Šğ’‹ğ’:* ğ‘´ğ’–ğ’ğ’•ğ’Š\n`;
            textoMenu += `â”ƒ âœ *ğ‘¬ğ’”ğ’•ğ’‚ğ’…ğ’:* ğ‘¨ğ’„ğ’•ğ’Šğ’—ğ’ âœ…\n`;
            textoMenu += `â•°â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n`;

            // --- SECCIÃ“N: ADMINISTRACIÃ“N ---
            textoMenu += `â”ƒ âœ *ğ‘¨ğ‘«ğ‘´ğ‘°ğ‘µğ‘°ğ‘ºğ‘»ğ‘¹ğ‘¨ğ‘ªğ‘°ğ‘¶ğ‘µ ğ‘«ğ‘¬ ğ‘®ğ‘¹ğ‘¼ğ‘·ğ‘¶ğ‘º*\n`;
            textoMenu += `â”ƒ\n`;
            textoMenu += `âœ§ âš”ï¸ \`â€  /ğ’‚ğ’…ğ’ğ’Šğ’ğ’”\`\n`;
            textoMenu += `â”ƒ ğ‘´ğ’†ğ’ğ’„ğ’Šğ’ğ’ğ’‚ ğ’‚ ğ’ğ’ğ’” ğ’‚ğ’…ğ’ğ’Šğ’ğ’Šğ’”ğ’•ğ’“ğ’‚ğ’…ğ’ğ’“ğ’†ğ’”.\n`;
            textoMenu += `âœ§ âš”ï¸ \`â€  /ğ’‚ğ’ğ’•ğ’Šğ’ğ’Šğ’ğ’Œ\`\n`;
            textoMenu += `â”ƒ ğ‘¨ğ’„ğ’•ğ’Šğ’—ğ’‚/ğ‘«ğ’†ğ’”ğ’‚ğ’„ğ’•ğ’Šğ’—ğ’‚ ğ’†ğ’ ğ’‚ğ’ğ’•ğ’Š-ğ’†ğ’ğ’ğ’‚ğ’„ğ’†ğ’”.\n`;
            textoMenu += `âœ§ âš”ï¸ \`â€  /ğ’Œğ’Šğ’„ğ’Œ\`\n`;
            textoMenu += `â”ƒ ğ‘¬ğ’™ğ’‘ğ’–ğ’ğ’”ğ’‚ ğ’‚ ğ’–ğ’ ğ’–ğ’”ğ’–ğ’‚ğ’“ğ’Šğ’ ğ’…ğ’†ğ’ ğ’ˆğ’“ğ’–ğ’‘ğ’.\n`;
            textoMenu += `âœ§ âš”ï¸ \`â€  /ğ’‘ğ’“ğ’ğ’ğ’ğ’•ğ’†\` | \`â€  /ğ’…ğ’†ğ’ğ’ğ’•ğ’†\`\n`;
            textoMenu += `â”ƒ ğ‘ºğ’–ğ’ƒğ’† ğ’ ğ’ƒğ’‚ğ’‹ğ’‚ ğ’†ğ’ ğ’“ğ’‚ğ’ğ’ˆğ’ ğ’…ğ’† ğ’–ğ’ ğ’–ğ’”ğ’–ğ’‚ğ’“ğ’Šğ’.\n`;
            textoMenu += `âœ§ âš”ï¸ \`â€  /ğ’•ğ’‚ğ’ˆğ’‚ğ’ğ’\` | \`â€  /ğ’‰ğ’Šğ’…ğ’†ğ’•ğ’‚ğ’ˆ\`\n`;
            textoMenu += `â”ƒ ğ‘´ğ’†ğ’ğ’„ğ’Šğ’ğ’ğ’‚ ğ’‚ ğ’•ğ’ğ’…ğ’ğ’” ğ’ğ’ğ’” ğ’ğ’Šğ’†ğ’ğ’ƒğ’“ğ’ğ’”.\n`;
            textoMenu += `âœ§ âš”ï¸ \`â€  /ğ’…ğ’†ğ’ğ’†ğ’•ğ’†\`\n`;
            textoMenu += `â”ƒ ğ‘¬ğ’ğ’Šğ’ğ’Šğ’ğ’‚ ğ’†ğ’ ğ’ğ’†ğ’ğ’”ğ’‚ğ’‹ğ’† ğ’„ğ’Šğ’•ğ’‚ğ’…ğ’.\n`;
            textoMenu += `âœ§ âš”ï¸ \`â€  /ğ’“ğ’†ğ’”ğ’†ğ’•ğ’ğ’Šğ’ğ’Œ\`\n`;
            textoMenu += `â”ƒ ğ‘ªğ’‚ğ’ğ’ƒğ’Šğ’‚ ğ’†ğ’ ğ’†ğ’ğ’ğ’‚ğ’„ğ’† ğ’…ğ’†ğ’ ğ’ˆğ’“ğ’–ğ’‘ğ’.\n`;
            textoMenu += `âœ§ âš”ï¸ \`â€  /ğ’‹ğ’ğ’Šğ’\` | \`â€  /ğ’ğ’–ğ’•\`\n`;
            textoMenu += `â”ƒ ğ‘¬ğ’ğ’•ğ’“ğ’‚ğ’“ ğ’ ğ’”ğ’‚ğ’ğ’Šğ’“ ğ’…ğ’† ğ’–ğ’ ğ’ˆğ’“ğ’–ğ’‘ğ’.\n`;
            textoMenu += `â”ƒ\n`;

            // --- SECCIÃ“N: UTILIDADES ---
            textoMenu += `Â» Ëšà­¨â€¢(ğŸ“¡)â€¢ âŠ¹ *ğ‘¼ğ‘»ğ‘°ğ‘³ğ‘°ğ‘«ğ‘¨ğ‘«ğ‘¬ğ‘º* âŠ¹\n`;
            textoMenu += `â”ƒ\n`;
            textoMenu += `âœ§ ğŸ“¡ \`â€  /ğ’‘ğ’Šğ’ğ’ˆ\`\n`;
            textoMenu += `â”ƒ ğ‘´ğ’–ğ’†ğ’”ğ’•ğ’“ğ’‚ ğ’ğ’‚ ğ’—ğ’†ğ’ğ’ğ’„ğ’Šğ’…ğ’‚ğ’… ğ’…ğ’†ğ’ ğ’ƒğ’ğ’•.\n`;
            textoMenu += `âœ§ ğŸ“¡ \`â€  /ğ’Šğ’ğ’‡ğ’\` | \`â€  /ğ’Šğ’ğ’‡ğ’ğ’ˆğ’‘\`\n`;
            textoMenu += `â”ƒ ğ‘°ğ’ğ’‡ğ’ğ’“ğ’ğ’‚ğ’„ğ’Šğ’Ìğ’ ğ’…ğ’†ğ’ ğ’ƒğ’ğ’• ğ’ ğ’…ğ’†ğ’ ğ’ˆğ’“ğ’–ğ’‘ğ’.\n`;
            textoMenu += `âœ§ ğŸ“¡ \`â€  /ğ’ğ’Šğ’ğ’Œ\`\n`;
            textoMenu += `â”ƒ ğ‘¶ğ’ƒğ’•ğ’†Ìğ’ ğ’†ğ’ğ’ğ’‚ğ’„ğ’† ğ’…ğ’†ğ’ ğ’ˆğ’“ğ’–ğ’‘ğ’ ğ’‚ğ’„ğ’•ğ’–ğ’‚ğ’.\n`;
            textoMenu += `âœ§ ğŸ“¡ \`â€  /ğ’”ğ’†ğ’•ğ’ğ’‚ğ’ğ’†\` | \`â€  /ğ’”ğ’†ğ’•ğ’Šğ’ğ’‡ğ’\`\n`;
            textoMenu += `â”ƒ ğ‘ªğ’‚ğ’ğ’ƒğ’Šğ’‚ ğ’…ğ’‚ğ’•ğ’ğ’” ğ’…ğ’†ğ’ ğ’ƒğ’ğ’•.\n`;
            textoMenu += `â”ƒ\n`;

            // --- SECCIÃ“N: ENTRETENIMIENTO ---
            textoMenu += `Â» Ëšà­¨â€¢(ğŸ’€)â€¢ âŠ¹ *ğ‘¬ğ‘µğ‘»ğ‘¹ğ‘¬ğ‘»ğ‘¬ğ‘µğ‘°ğ‘´ğ‘°ğ‘¬ğ‘µğ‘»ğ‘¶* âŠ¹\n`;
            textoMenu += `â”ƒ\n`;
            textoMenu += `âœ§ ğŸ­ \`â€  /ğ’•ğ’Šğ’Œğ’•ğ’ğ’Œ\`\n`;
            textoMenu += `â”ƒ ğ‘«ğ’†ğ’”ğ’„ğ’‚ğ’“ğ’ˆğ’‚ğ’“ ğ’—ğ’Šğ’…ğ’†ğ’ğ’” ğ’…ğ’† ğ‘»ğ’Šğ’Œğ‘»ğ’ğ’Œ.\n`;
            textoMenu += `âœ§ ğŸ­ \`â€  /ğ’‘ğ’‘ğ’•\`\n`;
            textoMenu += `â”ƒ ğ‘±ğ’–ğ’†ğ’ˆğ’‚ ğ’‘ğ’Šğ’†ğ’…ğ’“ğ’‚, ğ’‘ğ’‚ğ’‘ğ’†ğ’ ğ’ ğ’•ğ’Šğ’‹ğ’†ğ’“ğ’‚.\n`;
            textoMenu += `âœ§ ğŸ­ \`â€  /ğ’Šğ’ğ’”ğ’–ğ’ğ’•ğ’‚ğ’“\`\n`;
            textoMenu += `â”ƒ ğ‘¬ğ’ ğ’ƒğ’ğ’• ğ’†ğ’ğ’—ğ’ŠÌğ’‚ ğ’–ğ’ ğ’Šğ’ğ’”ğ’–ğ’ğ’•ğ’.\n`;
            textoMenu += `âœ§ ğŸ­ \`â€  /ğ’…ğ’ğ’™ğ’†ğ’\` | \`â€  /ğ’ƒğ’–ğ’ˆ\`\n`;
            textoMenu += `â”ƒ ğ‘ªğ’ğ’ğ’‚ğ’ğ’…ğ’ğ’” ğ’…ğ’† ğ’ƒğ’“ğ’ğ’ğ’‚.\n`;
            textoMenu += `â”ƒ\n`;

            textoMenu += `â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n`;
            textoMenu += `ğŸš© *ğ‘µğ’‚ğ’“ğ’–ğ’•ğ’ğ’ƒğ’ğ’• ğ‘ºğ’šğ’”ğ’•ğ’†ğ’ 2026*`;

            // 3. EnvÃ­o con externalAdReply y quoted
            await sock.sendMessage(from, { 
                text: textoMenu,
                contextInfo: {
                    externalAdReply: {
                        title: "ğ‘¨ğ‘«ğ‘´ğ‘°ğ‘µğ‘°ğ‘ºğ‘»ğ‘¹ğ‘¨ğ‘ªğ‘°ğ‘¶Ìğ‘µ ğ‘ªğ‘¬ğ‘µğ‘»ğ‘¹ğ‘¨ğ‘³",
                        body: "ğ‘µğ’‚ğ’“ğ’–ğ’•ğ’ğ’ƒğ’ğ’• ğ‘ºğ’šğ’”ğ’•ğ’†ğ’ ğŸ¥",
                        thumbnailUrl: thumbUrl,
                        mediaType: 1,
                        renderLargerThumbnail: true
                    }
                }
            }, { quoted: msg });

            await sock.sendMessage(from, { react: { text: "ğŸ“œ", key: msg.key } });

        } catch (e) {
            console.log("Error en el menÃº:", e);
        }
    }
};
