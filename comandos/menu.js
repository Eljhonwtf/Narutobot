const fs = require('fs');

module.exports = {
    name: 'menu',
    description: 'MenÃº Estilo Ninja para Narutobot',
    run: async (sock, msg, body, args, isOwner) => {
        try {
            const from = msg.key.remoteJid;
            const thumbUrl = "https://i.postimg.cc/nLQ2RwPz/Screenshot-2025-12-30-14-40-31-396-com-miui-gallery-edit.jpg";

            // 1. Cargar base de datos (opcional para el nombre)
            let db = {};
            if (fs.existsSync('./usuarios.json')) {
                db = JSON.parse(fs.readFileSync('./usuarios.json'));
            }
            const userData = db[from];
            let nombreUser = isOwner ? "ğ‘±ğ’‰ğ’ğ’ ğŸ´â€â˜ ï¸" : (userData?.split('|')[0] || "ğ‘¨ğ’ˆğ’†ğ’ğ’•ğ’†");

            // 2. ConstrucciÃ³n del MenÃº
            let textoMenu = `ğ‡ğ¨ğ¥ğš! ğ’ğ¨ğ² *ğ‘µğ’‚ğ’“ğ’–ğ’•ğ’ğ’ƒğ’ğ’•* ğŸ¥\n`;
            textoMenu += `_Â¡ğ‘©ğ’Šğ’†ğ’ğ’—ğ’†ğ’ğ’Šğ’…ğ’, ${nombreUser}!_ \n\n`;
            
            textoMenu += `â•­â”â”ã€” ğŸ“œ *ğ‘°ğ‘µğ‘­ğ‘¶ ğ‘ºğ‘°ğ‘ºğ‘»ğ‘¬ğ‘´ğ‘¨* ã€•â”â”ğŸ¥\n`;
            textoMenu += `â”ƒ âœ *ğ‘·ğ’‚ğ’Šğ’”:* ğ‘½ğ’†ğ’ğ’†ğ’›ğ’–ğ’†ğ’ğ’‚ ğŸ‡»ğŸ‡ª\n`;
            textoMenu += `â”ƒ âœ *ğ‘·ğ’“ğ’†ğ’‡ğ’Šğ’‹ğ’:* ğ‘´ğ’–ğ’ğ’•ğ’Š\n`;
            textoMenu += `â”ƒ âœ *ğ‘¬ğ’”ğ’•ğ’‚ğ’…ğ’:* ğ‘¨ğ’„ğ’•ğ’Šğ’—ğ’ âœ…\n`;
            textoMenu += `â•°â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n`;

            textoMenu += `Â» Ëšà­¨â€¢(âš”ï¸)â€¢ âŠ¹ ğ‘³ğ‘°ğ‘ºğ‘»ğ‘¨ ğ‘«ğ‘¬ ğ‘´ğ‘¬ğ‘µğ‘¼ âŠ¹\n\n`;

            textoMenu += `ğŸ›¡ï¸ *ğ‘®ğ‘¬ğ‘ºğ‘»ğ‘°ğ‘¶Ìğ‘µ ğ‘«ğ‘¬ ğ‘²ğ‘¶ğ‘µğ‘¶ğ‘¯ğ‘¨*\n`;
            textoMenu += `> _ğ‘ªğ’ğ’ğ’•ğ’“ğ’ğ’ ğ’…ğ’† ğ’ˆğ’“ğ’–ğ’‘ğ’ğ’”_\n`;
            textoMenu += `âœ§ â€  /ğ’‚ğ’…ğ’ğ’Šğ’ğ’”\n   â”” _ğ‘³ğ’Šğ’”ğ’•ğ’‚ ğ’…ğ’† ğ’‚ğ’…ğ’ğ’Šğ’ğ’”_\n`;
            textoMenu += `âœ§ â€  /ğ’‚ğ’ğ’•ğ’Šğ’ğ’Šğ’ğ’Œ\n   â”” _ğ‘¬ğ’—ğ’Šğ’•ğ’‚ ğ’†ğ’ğ’ğ’‚ğ’„ğ’†ğ’” ğ’†ğ’™ğ’•ğ’†ğ’“ğ’ğ’ğ’”_\n`;
            textoMenu += `âœ§ â€  /ğ’Œğ’Šğ’„ğ’Œ\n   â”” _ğ‘¬ğ’™ğ’‘ğ’–ğ’ğ’”ğ’‚ğ’“ ğ’–ğ’ ğ’–ğ’”ğ’–ğ’‚ğ’“ğ’Šğ’_\n`;
            textoMenu += `âœ§ â€  /ğ’‘ğ’“ğ’ğ’ğ’ğ’•ğ’†\n   â”” _ğ‘«ğ’‚ğ’“ ğ’‚ğ’…ğ’ğ’Šğ’_\n`;
            textoMenu += `âœ§ â€  /ğ’…ğ’†ğ’ğ’ğ’•ğ’†\n   â”” _ğ‘¸ğ’–ğ’Šğ’•ğ’‚ğ’“ ğ’‚ğ’…ğ’ğ’Šğ’_\n`;
            textoMenu += `âœ§ â€  /ğ’•ğ’‚ğ’ˆğ’‚ğ’ğ’\n   â”” _ğ‘°ğ’ğ’—ğ’ğ’„ğ’‚ğ’“ ğ’‚ ğ’•ğ’ğ’…ğ’ğ’”_\n`;
            textoMenu += `âœ§ â€  /ğ’ˆğ’“ğ’–ğ’‘ğ’\n   â”” _ğ‘¨ğ’ƒğ’“ğ’Šğ’“/ğ‘ªğ’†ğ’“ğ’“ğ’‚ğ’“ ğ’ˆğ’“ğ’–ğ’‘ğ’_\n`;
            textoMenu += `âœ§ â€  /ğ’…ğ’†ğ’ğ’†ğ’•ğ’†\n   â”” _ğ‘©ğ’ğ’“ğ’“ğ’‚ğ’“ ğ’ğ’†ğ’ğ’”ğ’‚ğ’‹ğ’†ğ’”_\n\n`;

            textoMenu += `ğŸ“¡ *ğ‘·ğ‘¬ğ‘¹ğ‘®ğ‘¨ğ‘´ğ‘°ğ‘µğ‘¶ğ‘º ğ‘«ğ‘¬ ğ‘¼ğ‘»ğ‘°ğ‘³ğ‘°ğ‘«ğ‘¨ğ‘«*\n`;
            textoMenu += `> _ğ‘°ğ’ğ’‡ğ’ğ’“ğ’ğ’‚ğ’„ğ’Šğ’Ìğ’ ğ’š ğ’„ğ’‚ğ’ğ’ƒğ’Šğ’ğ’”_\n`;
            textoMenu += `âœ§ â€  /ğ’‘ğ’Šğ’ğ’ˆ\n   â”” _ğ‘½ğ’†ğ’ğ’ğ’„ğ’Šğ’…ğ’‚ğ’… ğ’…ğ’†ğ’ ğ’”ğ’Šğ’”ğ’•ğ’†ğ’ğ’‚_\n`;
            textoMenu += `âœ§ â€  /ğ’Šğ’ğ’‡ğ’ğ’ˆğ’‘\n   â”” _ğ‘«ğ’‚ğ’•ğ’ğ’” ğ’…ğ’†ğ’ ğ’ˆğ’“ğ’–ğ’‘ğ’_\n`;
            textoMenu += `âœ§ â€  /ğ’ğ’Šğ’ğ’Œ\n   â”” _ğ‘¬ğ’ğ’ğ’‚ğ’„ğ’† ğ’…ğ’†ğ’ ğ’„ğ’‰ğ’‚ğ’•_\n`;
            textoMenu += `âœ§ â€  /ğ’”ğ’†ğ’•ğ’ğ’‚ğ’ğ’†\n   â”” _ğ‘ªğ’‚ğ’ğ’ƒğ’Šğ’‚ğ’“ ğ’ğ’ğ’ğ’ƒğ’“ğ’†_\n`;
            textoMenu += `âœ§ â€  /ğ’”ğ’†ğ’•ğ’Šğ’ğ’‡ğ’\n   â”” _ğ‘ªğ’‚ğ’ğ’ƒğ’Šğ’‚ğ’“ ğ’…ğ’†ğ’”ğ’„ğ’“ğ’Šğ’‘ğ’„ğ’Šğ’Ìğ’_\n\n`;

            textoMenu += `ğŸ­ *ğ‘±ğ‘¼ğ‘»ğ‘ºğ‘¼ğ‘º ğ‘«ğ‘¬ ğ‘«ğ‘°ğ‘½ğ‘¬ğ‘¹ğ‘ºğ‘°ğ‘¶Ìğ‘µ*\n`;
            textoMenu += `> _ğ‘¬ğ’ğ’•ğ’“ğ’†ğ’•ğ’†ğ’ğ’Šğ’ğ’Šğ’†ğ’ğ’•ğ’_\n`;
            textoMenu += `âœ§ â€  /ğ’•ğ’Šğ’Œğ’•ğ’ğ’Œ\n   â”” _ğ‘«ğ’†ğ’”ğ’„ğ’‚ğ’“ğ’ˆğ’‚ğ’“ ğ’—ğ’Šğ’…ğ’†ğ’ğ’”_\n`;
            textoMenu += `âœ§ â€  /ğ’‘ğ’‘ğ’•\n   â”” _ğ‘·ğ’Šğ’†ğ’…ğ’“ğ’‚, ğ’‘ğ’‚ğ’‘ğ’†ğ’ ğ’ ğ’•ğ’Šğ’‹ğ’†ğ’“ğ’‚_\n`;
            textoMenu += `âœ§ â€  /ğ’Šğ’ğ’”ğ’–ğ’ğ’•ğ’‚ğ’“\n   â”” _ğ‘´ğ’ğ’…ğ’ ğ’•ğ’Ìğ’™ğ’Šğ’„ğ’ ğ’‚ğ’„ğ’•ğ’Šğ’—ğ’_\n`;
            textoMenu += `âœ§ â€  /ğ’…ğ’ğ’™ğ’†ğ’\n   â”” _ğ‘©ğ’“ğ’ğ’ğ’‚ ğ’…ğ’† ğ’“ğ’†ğ’”ğ’•ğ’“ğ’†ğ’_\n`;
            textoMenu += `âœ§ â€  /ğ’•ğ’“\n   â”” _ğ‘»ğ’“ğ’‚ğ’…ğ’–ğ’„ğ’•ğ’ğ’“ ğ’ğ’–ğ’ğ’•ğ’Š-ğ’Šğ’…ğ’Šğ’ğ’ğ’‚_\n\n`;

            textoMenu += `ğŸ‘‘ *ğ‘²ğ‘¨ğ‘®ğ‘¬ ğ‘·ğ‘¹ğ‘°ğ‘½ğ‘¨ğ‘»ğ‘¬*\n`;
            textoMenu += `> _ğ‘ºğ’ğ’ğ’ ğ’‘ğ’‚ğ’“ğ’‚ ğ’†ğ’ ğ‘¶ğ’˜ğ’ğ’†ğ’“_\n`;
            textoMenu += `âœ§ â€  /ğ’ƒğ’„\n   â”” _ğ‘´ğ’†ğ’ğ’”ğ’‚ğ’‹ğ’† ğ’ˆğ’ğ’ğ’ƒğ’‚ğ’_\n`;
            textoMenu += `âœ§ â€  /ğ’‹ğ’ğ’Šğ’\n   â”” _ğ‘¼ğ’ğ’Šğ’“ğ’”ğ’† ğ’‚ ğ’–ğ’ ğ’ˆğ’“ğ’–ğ’‘ğ’_\n`;
            textoMenu += `âœ§ â€  /ğ’ğ’–ğ’•\n   â”” _ğ‘ºğ’‚ğ’ğ’Šğ’“ ğ’…ğ’†ğ’ ğ’ˆğ’“ğ’–ğ’‘ğ’_\n`;
            textoMenu += `âœ§ â€  /ğ’‚ğ’–ğ’•ğ’ğ’…ğ’\n   â”” _ğ‘´ğ’†ğ’ğ’”ğ’‚ğ’‹ğ’†ğ’” ğ’…ğ’Šğ’“ğ’†ğ’„ğ’•ğ’ğ’”_\n\n`;

            textoMenu += `â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n`;
            textoMenu += `ğŸš© *ğ‘µğ’‚ğ’“ğ’–ğ’•ğ’ğ’ƒğ’ğ’• ğ‘ºğ’šğ’”ğ’•ğ’†ğ’ 2026*`;

            // 3. EnvÃ­o con externalAdReply y quoted
            await sock.sendMessage(from, { 
                text: textoMenu,
                contextInfo: {
                    externalAdReply: {
                        title: "ğ‘¨ğ‘«ğ‘´ğ‘°ğ‘µğ‘°ğ‘ºğ‘»ğ‘¹ğ‘¨ğ‘ªğ‘°ğ‘¶Ìğ‘µ ğ‘ªğ‘¬ğ‘µğ‘»ğ‘¹ğ‘¨ğ‘³",
                        body: "ğ‘µğ’‚ğ’“ğ’–ğ’•ğ’ğ’ƒğ’ğ’• ğ‘ºğ’šğ’”ğ’•ğ’†ğ’ ğŸ¥",
                        thumbnailUrl: thumbUrl,
                        mediaType: 1,
                        renderLargerThumbnail: true
                    }
                }
            }, { quoted: msg });

            await sock.sendMessage(from, { react: { text: "ğŸ“œ", key: msg.key } });

        } catch (e) {
            console.log("Error en el menÃº:", e);
        }
    }
};
