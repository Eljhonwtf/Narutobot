module.exports = {
    name: 'join',
    description: 'ğ’…ğ’†ğ’”ğ’‘ğ’ğ’Šğ’†ğ’ˆğ’–ğ’† ğ’•ğ’‚Ìğ’„ğ’•ğ’Šğ’„ğ’ ğ’†ğ’ ğ’ğ’–ğ’†ğ’—ğ’ğ’” ğ’”ğ’†ğ’„ğ’•ğ’ğ’“ğ’†ğ’”',
    run: async (sock, msg, body, args, isOwner) => {
        const from = msg.key.remoteJid;
        const thumbUrl = "https://i.postimg.cc/nLQ2RwPz/Screenshot-2025-12-30-14-40-31-396-com-miui-gallery-edit.jpg";

        try {
            // 1. PROTOCOLO DE AUTORIZACIÃ“N
            if (!isOwner) {
                return await sock.sendMessage(from, { 
                    text: `ã€ ğŸš€ **ğ’‚ğ’„ğ’„ğ’†ğ’”ğ’ ğ’“ğ’†ğ’”ğ’•ğ’“ğ’Šğ’ğ’ˆğ’Šğ’…ğ’** ğŸŒğŸ½â€â™‚ï¸ ã€\n\nğ’”ğ’ğ’ğ’ ğ’†ğ’ ğ’‹ğ’†ğ’‡ğ’† ğ’•ğ’Šğ’†ğ’ğ’† ğ’‚ğ’–ğ’•ğ’ğ’“ğ’Šğ’›ğ’‚ğ’„ğ’Šğ’Ìğ’ ğ’‘ğ’‚ğ’“ğ’‚ ğ’…ğ’†ğ’”ğ’‘ğ’ğ’†ğ’ˆğ’‚ğ’“ ğ’–ğ’ğ’Šğ’…ğ’‚ğ’…ğ’†ğ’” ğ’†ğ’ ğ’ğ’–ğ’†ğ’—ğ’ğ’” ğ’”ğ’†ğ’„ğ’•ğ’ğ’“ğ’†ğ’”. ğŸ”’` 
                }, { quoted: msg });
            }

            // 2. VERIFICACIÃ“N DE ENLACE
            const link = args[0];
            if (!link || !link.includes('chat.whatsapp.com/')) {
                return await sock.sendMessage(from, { 
                    text: `ã€ âš ï¸ **ğ’†ğ’“ğ’“ğ’ğ’“ ğ’…ğ’† ğ’‘ğ’‚ğ’“ğ’‚Ìğ’ğ’†ğ’•ğ’“ğ’ğ’”** ğŸš€ ã€\n\nğ’…ğ’†ğ’ƒğ’†ğ’” ğ’‘ğ’“ğ’ğ’‘ğ’ğ’“ğ’„ğ’Šğ’ğ’ğ’‚ğ’“ ğ’–ğ’ ğ’†ğ’ğ’ğ’‚ğ’„ğ’† ğ’—ğ’‚Ìğ’ğ’Šğ’…ğ’ ğ’‘ğ’‚ğ’“ğ’‚ ğ’ğ’‚ ğ’Šğ’ğ’‡ğ’Šğ’ğ’•ğ’“ğ’‚ğ’„ğ’Šğ’Ìğ’.\n\nğŸŒğŸ½â€â™‚ï¸ **ğ’†ğ’‹ğ’†ğ’ğ’‘ğ’ğ’:**\n*/ğ’‹ğ’ğ’Šğ’ ğ’‰ğ’•ğ’•ğ’‘ğ’”://ğ’„ğ’‰ğ’‚ğ’•.ğ’˜ğ’‰ğ’‚ğ’•ğ’”ğ’‚ğ’‘ğ’‘.ğ’„ğ’ğ’/ğ’™ğ’™ğ’™ğ’™ğ’™*` 
                }, { quoted: msg });
            }

            // 3. EJECUCIÃ“N DE INFILTRACIÃ“N
            const code = link.split('https://chat.whatsapp.com/')[1];
            const response = await sock.groupAcceptInvite(code);

            // 4. DISEÃ‘O DE CONFIRMACIÃ“N TÃCTICA
            let joinMsg = `ã€ ğŸš€ **ğ’ğ’‚ğ’“ğ’–ğ’•ğ’ğ’ƒğ’ğ’• ğ’Šğ’ğ’‡ğ’Šğ’ğ’•ğ’“ğ’‚ğ’•ğ’Šğ’ğ’** ğŸŒğŸ½â€â™‚ï¸ ã€\n\n`;
            joinMsg += `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n`;
            joinMsg += `  âœ… **ğ’†ğ’”ğ’•ğ’‚ğ’…ğ’:** ğ’…ğ’†ğ’”ğ’‘ğ’ğ’Šğ’†ğ’ˆğ’–ğ’† ğ’†ğ’™ğ’Šğ’•ğ’ğ’”ğ’\n`;
            joinMsg += `  ğŸ›°ï¸ **ğ’”ğ’†ğ’„ğ’•ğ’ğ’“:** ğ’ğ’–ğ’†ğ’—ğ’ ğ’ˆğ’“ğ’–ğ’‘ğ’ ğ’‚ğ’„ğ’•ğ’Šğ’—ğ’\n`;
            joinMsg += `  ğŸ”‘ **ğ’Šğ’…:** ${response}\n`;
            joinMsg += `â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n`;
            joinMsg += `ğŸš€ **ğ’”ğ’Šğ’”ğ’•ğ’†ğ’ğ’‚:** ğ’–ğ’ğ’Šğ’…ğ’‚ğ’… ğ’ğ’Šğ’”ğ’•ğ’‚ ğ’‘ğ’‚ğ’“ğ’‚ ğ’ğ’‘ğ’†ğ’“ğ’‚ğ’“.\n`;
            joinMsg += `ğŸŒğŸ½â€â™‚ï¸ _ğ’”ğ’Šğ’ğ’„ğ’“ğ’ğ’ğ’Šğ’›ğ’‚ğ’…ğ’ ğ’„ğ’ğ’ ğ’‹ğ’‰ğ’ğ’ ğ’”ğ’šğ’”ğ’•ğ’†ğ’_`;

            await sock.sendMessage(from, { 
                text: joinMsg,
                contextInfo: {
                    externalAdReply: {
                        title: "ğŸ›°ï¸ ğ’‚ğ’…ğ’ğ’Šğ’ğ’Šğ’”ğ’•ğ’“ğ’‚ğ’„ğ’Šğ’Ìğ’ ğ’„ğ’†ğ’ğ’•ğ’“ğ’‚ğ’ ğ’ğ’‚ğ’“ğ’–ğ’•ğ’ğ’ƒğ’ğ’•",
                        body: "ğ’…ğ’†ğ’”ğ’‘ğ’ğ’Šğ’†ğ’ˆğ’–ğ’† ğ’…ğ’† ğ’–ğ’ğ’Šğ’…ğ’‚ğ’… ğ’„ğ’ğ’ğ’‘ğ’ğ’†ğ’•ğ’‚ğ’…ğ’ ğŸš€",
                        thumbnailUrl: thumbUrl,
                        mediaType: 1,
                        renderLargerThumbnail: true
                    }
                }
            }, { quoted: msg });

            await sock.sendMessage(from, { react: { text: "ğŸŒğŸ½â€â™‚ï¸", key: msg.key } });

        } catch (e) {
            console.error(e);
            await sock.sendMessage(from, { 
                text: `ã€ âŒ **ğ’‡ğ’‚ğ’ğ’ğ’ ğ’†ğ’ ğ’ğ’‚ ğ’ğ’‘ğ’†ğ’“ğ’‚ğ’„ğ’Šğ’Ìğ’** ğŸš€ ã€\n\nğ’ğ’ ğ’‘ğ’–ğ’…ğ’† ğ’–ğ’ğ’Šğ’“ğ’ğ’† ğ’‚ğ’ ğ’”ğ’†ğ’„ğ’•ğ’ğ’“. ğ’†ğ’ ğ’†ğ’ğ’ğ’‚ğ’„ğ’† ğ’‘ğ’–ğ’†ğ’…ğ’† ğ’†ğ’”ğ’•ğ’‚ğ’“ ğ’—ğ’†ğ’ğ’„ğ’Šğ’…ğ’ ğ’ ğ’ğ’‚ ğ’–ğ’ğ’Šğ’…ğ’‚ğ’… ğ’‡ğ’–ğ’† ğ’ƒğ’†ğ’•ğ’‚ğ’…ğ’‚. ğŸŒğŸ½â€â™‚ï¸` 
            }, { quoted: msg });
        }
    }
};
